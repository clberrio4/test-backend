# üèóÔ∏è Gu√≠a de Despliegue ‚Äì **Funds Backend**

Este documento describe el proceso de instalaci√≥n, ejecuci√≥n y despliegue del proyecto **Funds Backend**, as√≠ como las herramientas necesarias para su correcto funcionamiento en entornos **local** y **producci√≥n**.

---

## üìã **Requisitos Previos**

Antes de comenzar, aseg√∫rate de tener instalado:

- [Maven 3.9+](https://maven.apache.org/download.cgi)
- [Java 17 o superior](https://adoptium.net/)
- [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) configurado con las credenciales adecuadas
- [NoSQL Workbench para DynamoDB](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.settingup.html) (para entorno local)
- Utilidad `zip` instalada en el sistema (**solo Linux/Mac**)
  ```bash
  sudo apt install zip    # Debian/Ubuntu
  brew install zip        # macOS
  ```

---

## ‚öôÔ∏è **Ejecuci√≥n en Local**

1. Aseg√∫rate de tener corriendo **DynamoDB Local** desde NoSQL Workbench.
2. Ejecuta el proyecto con el perfil `local`:
   ```bash
   mvn spring-boot:run -Dspring-boot.run.profiles=local
   ```

---

## üöÄ **Despliegue en Producci√≥n**

### 1Ô∏è‚É£ Preparar Configuraci√≥n

- Crea el archivo:
  ```
  src/main/resources/application-prod.properties
  ```
  con las variables necesarias para producci√≥n.

- Renombra y ajusta `params-copy.json` a:
  ```
  params.json
  ```
  completando los valores de cada par√°metro.

---

### 2Ô∏è‚É£ Ejecutar Script de Build y Deploy

#### **Windows (PowerShell)**
```powershell
.uild.ps1
```

#### **Linux / macOS**
```bash
chmod +x build.sh
./build.sh
```
> üí° Ambos scripts generan `app-deploy.zip`, lo suben al bucket S3 y actualizan el stack de **AWS CloudFormation**.

---

## üîó **URLs de Acceso en Producci√≥n**

- **Swagger UI:** `/api/docs`
- **Servicios API:** `/api/*`

> Estas rutas estar√°n disponibles en el dominio configurado para el entorno productivo.

---

## üîÑ **Actualizaci√≥n de Producci√≥n**

Si necesitas actualizar el c√≥digo en producci√≥n **sin cambiar la estructura del stack**:

1. Sube manualmente el nuevo `.zip` al bucket S3.
2. Ejecuta:
   ```bash
   aws cloudformation update-stack      --stack-name funds-backend-stack      --template-body file://template.yml      --parameters file://params.json      --capabilities CAPABILITY_NAMED_IAM      --region us-east-1
   ```

‚ö†Ô∏è **Importante:** Si el cambio implica modificar recursos estructurales (por ejemplo, tablas DynamoDB, roles IAM, etc.), ser√° necesario eliminar el stack y volver a desplegar.

---

## ‚ùå **Eliminar Stack**

```bash
aws cloudformation delete-stack   --stack-name funds-backend-stack   --region us-east-1
```

Luego, vuelve a ejecutar el script correspondiente a tu sistema operativo para recrearlo.

---

## üìö **Referencias**

- [Maven ‚Äì Apache](https://maven.apache.org/)
- [Java 17 ‚Äì Adoptium](https://adoptium.net/)
- [AWS CLI ‚Äì Instalaci√≥n](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html)
- [AWS CloudFormation ‚Äì Documentaci√≥n](https://docs.aws.amazon.com/cloudformation/)
- [NoSQL Workbench ‚Äì AWS](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.settingup.html)
- [DynamoDB Local ‚Äì Gu√≠a](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html)
